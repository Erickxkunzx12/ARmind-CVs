{% extends "base.html" %}

{% block title %}ARMind CVs - Optimiza tu Currículum con IA{% endblock %}

{% block content %}
<div class="container">
    <!-- Hero Section -->
    <div class="row align-items-center mb-5 editable-card position-relative" style="min-height: 70vh;">
        {% if session.user_role == 'admin' %}
        <div class="section-edit-pencil" onclick="openEditModal('welcome_section', 'Sección: Bienvenida Principal', {
            title: 'Optimiza tu Currículum con Inteligencia Artificial',
            description: 'ARMind CVs es una plataforma de análisis de currículums impulsada por IA para equipos de desarrollo ocupados.'
        })">
            <i class="fas fa-pencil-alt"></i>
        </div>
        {% endif %}
        <div class="col-lg-6">
            <h1 class="display-3 fw-bold mb-4" style="color: #1a365d; line-height: 1.2; font-weight: 700;">
                Optimiza tu Currículum con <span style="color: #00d4ff;">Inteligencia Artificial</span>
            </h1>
            <p class="lead mb-5" style="color: #4a5568; font-size: 1.25rem; line-height: 1.6;">
                ARMind CVs es una plataforma de análisis de currículums impulsada por IA para equipos de desarrollo ocupados.
            </p>
            <div class="d-flex gap-3">
                {% if not session.user_id %}
                <a href="{{ url_for('register') }}" class="btn btn-primary btn-lg">
                    COMENZAR
                </a>
                <a href="{{ url_for('login') }}" class="btn btn-outline-primary btn-lg">
                    DOCUMENTACIÓN
                </a>
                {% else %}
                <a href="{{ url_for('dashboard') }}" class="btn btn-primary btn-lg">
                    IR AL DASHBOARD
                </a>
                {% endif %}
            </div>
        </div>
        <div class="col-lg-6 text-center">
            <div class="position-relative">
                <svg width="400" height="300" viewBox="0 0 400 300" class="img-fluid">
                    <!-- CV Document -->
                    <rect x="50" y="50" width="200" height="250" rx="10" fill="#ffffff" stroke="#3498db" stroke-width="2"/>
                    <rect x="70" y="70" width="160" height="20" rx="5" fill="#3498db"/>
                    <rect x="70" y="100" width="120" height="8" rx="4" fill="#ecf0f1"/>
                    <rect x="70" y="115" width="140" height="8" rx="4" fill="#ecf0f1"/>
                    <rect x="70" y="130" width="100" height="8" rx="4" fill="#ecf0f1"/>
                    
                    <!-- AI Brain -->
                    <circle cx="320" cy="120" r="40" fill="#e74c3c"/>
                    <circle cx="310" cy="110" r="8" fill="#ffffff"/>
                    <circle cx="330" cy="110" r="8" fill="#ffffff"/>
                    <path d="M300 130 Q320 140 340 130" stroke="#ffffff" stroke-width="3" fill="none"/>
                    
                    <!-- Connection Lines -->
                    <path d="M250 150 Q280 140 280 120" stroke="#f39c12" stroke-width="3" fill="none" stroke-dasharray="5,5">
                        <animate attributeName="stroke-dashoffset" values="0;10" dur="1s" repeatCount="indefinite"/>
                    </path>
                    
                    <!-- Results -->
                    <rect x="280" y="200" width="80" height="60" rx="8" fill="#27ae60"/>
                    <text x="320" y="220" text-anchor="middle" fill="#ffffff" font-size="12" font-weight="bold">95%</text>
                    <text x="320" y="235" text-anchor="middle" fill="#ffffff" font-size="10">Score</text>
                    <text x="320" y="250" text-anchor="middle" fill="#ffffff" font-size="8">Excelente</text>
                </svg>
            </div>
        </div>
    </div>
    
    <!-- Features Section -->
    <div class="row mb-5" style="margin-top: 8rem;">
        <div class="col-12 text-center mb-5">
            <h2 class="fw-bold mb-3" style="color: #1a365d; font-size: 2.5rem;">¿Por qué elegir ARMind CVs?</h2>
            <p class="text-muted" style="font-size: 1.1rem; color: #718096;">Herramientas profesionales para impulsar tu carrera</p>
        </div>
        
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100 border-0 editable-card position-relative" style="padding: 2rem;">
                {% if session.user_role == 'admin' %}
                <div class="card-edit-pencil" onclick="openEditModal('feature_ai', 'Característica: Análisis con IA', {
                    title: 'Análisis con IA',
                    description: 'Nuestro sistema de IA analiza tu CV como lo haría un ATS real, proporcionando puntuaciones y recomendaciones precisas.',
                    icon: 'fas fa-robot',
                    icon_color: '#00d4ff'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <div class="card-body text-center">
                    <div class="mb-4">
                        <i class="fas fa-robot" style="font-size: 3rem; color: #00d4ff;"></i>
                    </div>
                    <h5 class="card-title fw-bold mb-3" style="color: #1a365d;">Análisis con IA</h5>
                    <p class="card-text" style="color: #718096; line-height: 1.6;">
                        Nuestro sistema de IA analiza tu CV como lo haría un ATS real, 
                        proporcionando puntuaciones y recomendaciones precisas.
                    </p>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100 border-0 editable-card position-relative" style="padding: 2rem;">
                {% if session.user_role == 'admin' %}
                <div class="card-edit-pencil" onclick="openEditModal('feature_builder', 'Característica: Constructor de CV', {
                    title: 'Constructor de CV',
                    description: 'Crea currículums profesionales en formato Harvard con nuestro constructor guiado paso a paso.',
                    icon: 'fas fa-file-alt',
                    icon_color: '#00d4ff'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <div class="card-body text-center">
                    <div class="mb-4">
                        <i class="fas fa-file-alt" style="font-size: 3rem; color: #00d4ff;"></i>
                    </div>
                    <h5 class="card-title fw-bold mb-3" style="color: #1a365d;">Constructor de CV</h5>
                    <p class="card-text" style="color: #718096; line-height: 1.6;">
                        Crea currículums profesionales en formato Harvard con nuestro 
                        constructor guiado paso a paso.
                    </p>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100 border-0 editable-card position-relative" style="padding: 2rem;">
                {% if session.user_role == 'admin' %}
                <div class="card-edit-pencil" onclick="openEditModal('feature_search', 'Característica: Búsqueda de Empleos', {
                    title: 'Búsqueda de Empleos',
                    description: 'Encuentra oportunidades laborales relevantes en múltiples plataformas con nuestro motor de búsqueda inteligente.',
                    icon: 'fas fa-search',
                    icon_color: '#00d4ff'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <div class="card-body text-center">
                    <div class="mb-4">
                        <i class="fas fa-search" style="font-size: 3rem; color: #00d4ff;"></i>
                    </div>
                    <h5 class="card-title fw-bold mb-3" style="color: #1a365d;">Búsqueda de Empleos</h5>
                    <p class="card-text" style="color: #718096; line-height: 1.6;">
                        Encuentra oportunidades laborales relevantes en múltiples 
                        plataformas con nuestro motor de búsqueda inteligente.
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- How it Works Section -->
    <div class="row mb-5 editable-card position-relative">
        {% if session.user_role == 'admin' %}
        <div class="section-edit-pencil" onclick="openEditModal('how_it_works_section', 'Sección: Cómo Funciona', {
            title: '¿Cómo funciona?',
            description: 'Proceso de tres pasos para optimizar tu CV'
        })">
            <i class="fas fa-pencil-alt"></i>
        </div>
        {% endif %}
        <div class="col-12 text-center mb-5">
            <h2 class="display-5 fw-bold">¿Cómo funciona?</h2>
            <p class="lead text-muted">Tres simples pasos para optimizar tu currículum</p>
        </div>
        
        <div class="col-lg-4 text-center mb-4">
            <div class="position-relative editable-card">
                {% if session.user_role == 'admin' %}
                <div class="card-edit-pencil" onclick="openEditModal('step_1', 'Paso 1: Sube tu CV', {
                    title: 'Sube tu CV',
                    description: 'Carga tu currículum en formato PDF o Word. Nuestro sistema extraerá automáticamente toda la información.',
                    step_number: '1'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center" 
                     style="width: 80px; height: 80px; font-size: 2rem; font-weight: bold;">1</div>
                <h4 class="mt-3">Sube tu CV</h4>
                <p class="text-muted">
                    Carga tu currículum en formato PDF o Word. 
                    Nuestro sistema extraerá automáticamente toda la información.
                </p>
            </div>
        </div>
        
        <div class="col-lg-4 text-center mb-4">
            <div class="position-relative editable-card">
                {% if session.user_role == 'admin' %}
                <div class="card-edit-pencil" onclick="openEditModal('step_2', 'Paso 2: Análisis IA', {
                    title: 'Análisis IA',
                    description: 'Nuestra IA analiza tu CV como un sistema ATS profesional, evaluando cada sección y palabra clave.',
                    step_number: '2'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <div class="bg-secondary text-white rounded-circle d-inline-flex align-items-center justify-content-center" 
                     style="width: 80px; height: 80px; font-size: 2rem; font-weight: bold;">2</div>
                <h4 class="mt-3">Análisis IA</h4>
                <p class="text-muted">
                    Nuestra IA analiza tu CV como un sistema ATS profesional, 
                    evaluando cada sección y palabra clave.
                </p>
            </div>
        </div>
        
        <div class="col-lg-4 text-center mb-4">
            <div class="position-relative editable-card">
                {% if session.user_role == 'admin' %}
                <div class="card-edit-pencil" onclick="openEditModal('step_3', 'Paso 3: Mejora y Aplica', {
                    title: 'Mejora y Aplica',
                    description: 'Recibe recomendaciones específicas, mejora tu CV y encuentra empleos que se ajusten a tu perfil.',
                    step_number: '3'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center" 
                     style="width: 80px; height: 80px; font-size: 2rem; font-weight: bold;">3</div>
                <h4 class="mt-3">Mejora y Aplica</h4>
                <p class="text-muted">
                    Recibe recomendaciones específicas, mejora tu CV y 
                    encuentra empleos que se ajusten a tu perfil.
                </p>
            </div>
        </div>
    </div>
    
    <!-- Stats Section -->
    <div class="row text-center mb-5 editable-card position-relative" style="margin-top: 8rem; padding: 4rem 0; background: rgba(230, 243, 255, 0.3); border-radius: 16px;">
        {% if session.user_role == 'admin' %}
        <div class="section-edit-pencil" onclick="openEditModal('stats_section', 'Sección: Estadísticas', {
            title: 'Resultados que Hablan por Sí Solos',
            description: 'Miles de profesionales ya han mejorado sus CVs con ARMind'
        })">
            <i class="fas fa-pencil-alt"></i>
        </div>
        {% endif %}
        <div class="col-12 mb-5">
            <h2 class="fw-bold" style="color: #1a365d; font-size: 2.5rem;">Resultados que Hablan por Sí Solos</h2>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="text-center editable-card position-relative">
                {% if session.user_role == 'admin' %}
                <div class="card-edit-pencil" onclick="openEditModal('stat_1', 'Estadística: Precisión ATS', {
                    title: 'Precisión en análisis ATS',
                    stat_value: '95%',
                    description: 'Precisión en análisis ATS'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <h3 class="fw-bold mb-2" style="color: #00d4ff; font-size: 3rem;">95%</h3>
                <p style="color: #718096; font-size: 1rem;">Precisión en análisis ATS</p>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="text-center editable-card position-relative">
                {% if session.user_role == 'admin' %}
                <div class="card-edit-pencil" onclick="openEditModal('stat_2', 'Estadística: CVs Analizados', {
                    title: 'CVs analizados',
                    stat_value: '10K+',
                    description: 'CVs analizados'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <h3 class="fw-bold mb-2" style="color: #00d4ff; font-size: 3rem;">10K+</h3>
                <p style="color: #718096; font-size: 1rem;">CVs analizados</p>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="text-center editable-card position-relative">
                {% if session.user_role == 'admin' %}
                <div class="card-edit-pencil" onclick="openEditModal('stat_3', 'Estadística: Mejora en entrevistas', {
                    title: 'Mejora en entrevistas',
                    stat_value: '85%',
                    description: 'Mejora en entrevistas'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <h3 class="fw-bold mb-2" style="color: #00d4ff; font-size: 3rem;">85%</h3>
                <p style="color: #718096; font-size: 1rem;">Mejora en entrevistas</p>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="text-center editable-card position-relative">
                {% if session.user_role == 'admin' %}
                <div class="card-edit-pencil" onclick="openEditModal('stat_4', 'Estadística: Disponibilidad', {
                    title: 'Disponibilidad',
                    stat_value: '24/7',
                    description: 'Disponibilidad'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <h3 class="fw-bold mb-2" style="color: #00d4ff; font-size: 3rem;">24/7</h3>
                <p style="color: #718096; font-size: 1rem;">Disponibilidad</p>
            </div>
        </div>
    </div>
    
    <!-- Pricing Section -->
    <div class="row mb-5" style="margin-top: 8rem;">
        <div class="col-12 text-center mb-5">
            <h2 class="fw-bold mb-3" style="color: #1a365d; font-size: 2.5rem;">Planes y Precios</h2>
            <p class="text-muted" style="font-size: 1.1rem; color: #718096;">Elige el plan que mejor se adapte a tus necesidades</p>
        </div>
        
        <!-- Free Trial Plan -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100 border-0 shadow-sm text-center editable-card" style="background-color: #f8f9fa; border: 1px solid #e9ecef !important;">
                {% if current_user.is_authenticated and current_user.is_admin %}
                <div class="card-edit-pencil" onclick="openEditModal('free_trial_plan', 'Editar Plan Gratuito', {
                    title: 'Prueba Gratuita',
                    description: 'Por 7 días',
                    icon: 'fas fa-gift',
                    icon_color: 'text-secondary'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <div class="card-header py-4" style="background-color: #ffffff; border-bottom: 1px solid #e9ecef;">
                    <i class="fas fa-gift" style="font-size: 2.5rem; color: #6c757d;"></i>
                    <h4 class="mt-3 mb-0" style="color: #495057;">Prueba Gratuita</h4>
                </div>
                <div class="card-body py-4">
                    <div class="mb-4">
                        <span class="display-4 fw-bold" style="color: #495057;">Gratis</span>
                        <div class="text-muted">Por 7 días</div>
                    </div>
                    <ul class="list-unstyled text-start">
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>3 análisis de CV</li>
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>1 creación de CV</li>
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>Análisis básico con IA</li>
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>Recomendaciones básicas</li>
                    </ul>
                </div>
                <div class="card-footer bg-transparent">
                    <a href="{{ url_for('register') }}" class="btn btn-lg w-100" style="background-color: #6c757d; border-color: #6c757d; color: white;">Comenzar Gratis</a>
                </div>
            </div>
        </div>
        
        <!-- Standard Plan -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100 border-0 shadow-sm text-center editable-card" style="background-color: #f8f9fa; border: 1px solid #e9ecef !important;">
                {% if current_user.is_authenticated and current_user.is_admin %}
                <div class="card-edit-pencil" onclick="openEditModal('standard_plan', 'Editar Plan Estándar', {
                    title: 'Estándar',
                    description: 'CLP / mes',
                    icon: 'fas fa-star',
                    icon_color: 'text-warning'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <div class="card-header py-4" style="background-color: #ffffff; border-bottom: 1px solid #e9ecef;">
                    <i class="fas fa-star" style="font-size: 2.5rem; color: #6c757d;"></i>
                    <h4 class="mt-3 mb-0" style="color: #495057;">Estándar</h4>
                    <span class="badge" style="background-color: #ffc107; color: #212529;">Más Popular</span>
                </div>
                <div class="card-body py-4">
                    <div class="mb-4">
                        <span class="display-4 fw-bold" style="color: #495057;">$9,990</span>
                        <div class="text-muted">CLP / mes</div>
                    </div>
                    <ul class="list-unstyled text-start">
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>50 análisis de CV</li>
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>10 creaciones de CV</li>
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>Análisis avanzado con IA</li>        
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>Soporte por email</li>
                    </ul>
                </div>
                <div class="card-footer bg-transparent">
                    <a href="{{ url_for('register') }}" class="btn btn-lg w-100" style="background-color: #6c757d; border-color: #6c757d; color: white;">Elegir Plan</a>
                </div>
            </div>
        </div>
        
        <!-- Pro Plan -->
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100 border-0 shadow-sm text-center editable-card" style="background-color: #f8f9fa; border: 1px solid #e9ecef !important;">
                {% if current_user.is_authenticated and current_user.is_admin %}
                <div class="card-edit-pencil" onclick="openEditModal('pro_plan', 'Editar Plan Profesional', {
                    title: 'Profesional',
                    description: 'CLP / mes',
                    icon: 'fas fa-crown',
                    icon_color: 'text-primary'
                })">
                    <i class="fas fa-pencil-alt"></i>
                </div>
                {% endif %}
                <div class="card-header py-4" style="background-color: #ffffff; border-bottom: 1px solid #e9ecef;">
                    <i class="fas fa-crown" style="font-size: 2.5rem; color: #6c757d;"></i>
                    <h4 class="mt-3 mb-0" style="color: #495057;">Profesional</h4>
                </div>
                <div class="card-body py-4">
                    <div class="mb-4">
                        <span class="display-4 fw-bold" style="color: #495057;">$19,990</span>
                        <div class="text-muted">CLP / mes</div>
                    </div>
                    <ul class="list-unstyled text-start">
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>Análisis ilimitados</li>
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>50 creaciones de CV</li>
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>Análisis premium con IA</li>
                        <li class="mb-2"><i class="fas fa-check me-2" style="color: #28a745;"></i>Soporte prioritario</li>
                    </ul>
                </div>
                <div class="card-footer bg-transparent">
                    <a href="{{ url_for('register') }}" class="btn btn-lg w-100" style="background-color: #6c757d; border-color: #6c757d; color: white;">Elegir Plan</a>
                </div>
            </div>
        </div>
    </div>

    <!-- CTA Section -->
    <div class="row text-center py-5 editable-card position-relative" style="background: linear-gradient(135deg, #1a365d 0%, #2d5a87 100%); border-radius: 20px; margin: 4rem 0;">
        {% if session.user_role == 'admin' %}
        <div class="section-edit-pencil" onclick="openEditModal('cta_section', 'Sección: Llamada a la Acción', {
            title: '¿Listo para Optimizar tu CV?',
            description: 'Únete a miles de profesionales que ya han mejorado sus oportunidades laborales',
            button1_text: 'Analizar mi CV Gratis',
            button1_icon: 'fas fa-upload',
            button2_text: 'Crear Cuenta',
            button2_icon: 'fas fa-user-plus'
        })">
            <i class="fas fa-pencil-alt"></i>
        </div>
        {% endif %}
        <div class="col-12">
            <h2 class="fw-bold text-white mb-4" style="font-size: 2.5rem;">¿Listo para Optimizar tu CV?</h2>
            <p class="text-white-50 mb-5" style="font-size: 1.2rem;">Únete a miles de profesionales que ya han mejorado sus oportunidades laborales</p>
            <div class="d-flex flex-column flex-md-row gap-3 justify-content-center">
                <a href="{{ url_for('analyze_cv') }}" class="btn btn-lg px-5 py-3" 
                   style="background: #00d4ff; color: #1a365d; border: none; border-radius: 50px; font-weight: 600; font-size: 1.1rem;">
                    <i class="fas fa-upload me-2"></i>Analizar mi CV
                </a>
                <a href="{{ url_for('register') }}" class="btn btn-outline-light btn-lg px-5 py-3" 
                   style="border: 2px solid #00d4ff; color: #00d4ff; border-radius: 50px; font-weight: 600; font-size: 1.1rem;">
                    <i class="fas fa-user-plus me-2"></i>Crear Cuenta
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    .card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: 1px solid rgba(0, 0, 0, 0.08);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }
    
    .card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
    }
    
    .btn {
        transition: all 0.3s ease;
    }
    
    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
    }
    
    /* Estilos para edición */
    .editable-card {
        position: relative;
    }
    
    .card-edit-pencil, .section-edit-pencil {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(0, 212, 255, 0.9);
        color: white;
        border: none;
        border-radius: 50%;
        width: 35px;
        height: 35px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 10;
        opacity: 0;
        transition: all 0.3s ease;
        font-size: 14px;
    }
    
    .editable-card:hover .card-edit-pencil,
    .editable-card:hover .section-edit-pencil {
        opacity: 1;
    }
    
    .card-edit-pencil:hover, .section-edit-pencil:hover {
        background: rgba(0, 212, 255, 1);
        transform: scale(1.1);
    }
    
    .success-message {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #28a745;
        color: white;
        padding: 15px 20px;
        border-radius: 5px;
        z-index: 1000;
        display: none;
    }
    
    /* Estilos para el selector de iconos */
    .icon-selector {
        max-height: 200px;
        overflow-y: auto;
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
        padding: 10px;
    }
    .icon-option {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 50px;
        border: 2px solid transparent;
        border-radius: 0.375rem;
        cursor: pointer;
        transition: all 0.2s;
        background-color: #f8f9fa;
    }
    .icon-option:hover {
        border-color: #007bff;
        background-color: #e3f2fd;
    }
    .icon-option.selected {
        border-color: #007bff;
        background-color: #007bff;
        color: white;
    }
    .icon-option.selected i {
        color: white !important;
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
        
        // Animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);
        
        // Observe all cards
        document.querySelectorAll('.card').forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(card);
        });
    });
    
    // Función para abrir el modal de edición
    function openEditModal(elementId, title, data) {
        document.getElementById('editModalLabel').textContent = title;
        document.getElementById('editElementId').value = elementId;
        
        // Llenar los campos del modal con los datos actuales
        document.getElementById('editTitle').value = data.title || '';
        document.getElementById('editDescription').value = data.description || '';
        document.getElementById('editIcon').value = data.icon || 'fas fa-lightbulb';
        document.getElementById('editIconColor').value = data.icon_color || 'text-primary';
        
        // Seleccionar el icono actual en el selector
        document.querySelectorAll('.icon-option').forEach(option => {
            option.classList.remove('selected');
            if (option.dataset.icon === (data.icon || 'fas fa-lightbulb') && 
                option.dataset.color === (data.icon_color || 'text-primary')) {
                option.classList.add('selected');
            }
        });
        
        // Mostrar el modal
        const modal = new bootstrap.Modal(document.getElementById('editModal'));
        modal.show();
    }
    
    // Funcionalidad para seleccionar iconos
    document.addEventListener('DOMContentLoaded', function() {
        const iconOptions = document.querySelectorAll('.icon-option');
        
        iconOptions.forEach(option => {
            option.addEventListener('click', function() {
                // Remover selección anterior
                iconOptions.forEach(opt => opt.classList.remove('selected'));
                
                // Seleccionar el icono actual
                this.classList.add('selected');
                
                // Actualizar los campos ocultos
                document.getElementById('editIcon').value = this.dataset.icon;
                document.getElementById('editIconColor').value = this.dataset.color;
            });
        });
    });
    
    // Función para guardar los cambios
    function saveCardEdit() {
        const elementId = document.getElementById('editElementId').value;
        const title = document.getElementById('editTitle').value;
        const description = document.getElementById('editDescription').value;
        const icon = document.getElementById('editIcon').value;
        const iconColor = document.getElementById('editIconColor').value;
        
        const data = {
            element_id: elementId,
            title: title,
            description: description,
            icon: icon,
            icon_color: iconColor
        };
        
        fetch('/admin/update_content', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Cerrar el modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('editModal'));
                modal.hide();
                
                // Recargar la página para mostrar los cambios
                location.reload();
            } else {
                alert('Error al actualizar el contenido: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Error al actualizar el contenido');
        });
    }
    
    // Función para mostrar mensaje de éxito
    function showSuccessMessage(message) {
        const successDiv = document.createElement('div');
        successDiv.className = 'success-message';
        successDiv.textContent = message;
        successDiv.style.display = 'block';
        document.body.appendChild(successDiv);
        
        setTimeout(() => {
            successDiv.style.display = 'none';
            document.body.removeChild(successDiv);
        }, 3000);
    }
</script>

<!-- Modal de Edición -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Editar Contenido</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="editElementId" name="element_id">
                <input type="hidden" id="editIcon" name="icon">
                <input type="hidden" id="editIconColor" name="icon_color">
                
                <div class="mb-3">
                    <label for="editTitle" class="form-label">Título</label>
                    <input type="text" class="form-control" id="editTitle" name="title">
                </div>
                
                <div class="mb-3">
                    <label for="editDescription" class="form-label">Descripción</label>
                    <textarea class="form-control" id="editDescription" name="description" rows="3"></textarea>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">Seleccionar Icono</label>
                    <div class="icon-selector">
                        <div class="row g-2">
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-lightbulb" data-color="text-warning">
                                    <i class="fas fa-lightbulb text-warning" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-star" data-color="text-warning">
                                    <i class="fas fa-star text-warning" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-heart" data-color="text-danger">
                                    <i class="fas fa-heart text-danger" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-thumbs-up" data-color="text-success">
                                    <i class="fas fa-thumbs-up text-success" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-rocket" data-color="text-info">
                                    <i class="fas fa-rocket text-info" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-trophy" data-color="text-warning">
                                    <i class="fas fa-trophy text-warning" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-fire" data-color="text-danger">
                                    <i class="fas fa-fire text-danger" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-gem" data-color="text-primary">
                                    <i class="fas fa-gem text-primary" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-check-circle" data-color="text-success">
                                    <i class="fas fa-check-circle text-success" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-chart-bar" data-color="text-primary">
                                    <i class="fas fa-chart-bar text-primary" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-brain" data-color="text-info">
                                    <i class="fas fa-brain text-info" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="icon-option" data-icon="fas fa-magic" data-color="text-purple">
                                    <i class="fas fa-magic text-primary" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="saveCardEdit()">Guardar Cambios</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}